---
title: Chapter8 字符输入输出和输出验证
date: 2023/4/5 23:17:25  # 文章发表时间
tags:
- C_learning
categories: C
#thumbnail: https://xxxxxxxxxx.png # 略缩图
---
所有系统都通用的标准I/O函数

## 8.1 单字符I/O：getchar()putchar()

getchar()和putchar()不是真正的函数，而是宏定义

## 8.2缓冲区

回显用户输入的字符后立即打印该字符属于**无缓冲输入**

通过enter刷新输入缓冲

为什么可要有缓冲区

* 节约时间
* 可以提前修正错误

缓冲分为两类

1. 完全缓冲I/O:当缓冲区被填满才刷新缓冲区
2. 行缓冲I/O：出现换行符时刷新缓冲区

### 8.3.1 文件，流和键盘输入

直接调用操作系统的函数被称为底层I/O

C程序处理的是流stream 而不是直接处理文件

C把输入和输出设备视为存储设备上的普通文件，尤其是把键盘和显示设备视为为每个c程序自动打开的文件，stdin流表示键盘输入,stdout表示屏幕输出

C输入内置了文件结尾检测器，

### 8.3.2 文件结尾

使用的方式是存储文件的大小检测文件结尾

C中如果检测到文件结尾将返回EOF

getchar()和scanf()检测到文件结尾也返回EOF

#define EOF (-1)

EOF是一个值，并非一个符号

如何在程序中使用EOF

`while((ch=getchar())!=EOF)`

在键盘输入模拟文件中，必须找出当前系统的要求，大多数Unix和linux系统中，在一行开始处按下ctrl+D作为文件结尾符号，许多计算机系统都把ctrl+Z作为文件结尾符号

## 8.4重定向和文件

输入和输出设计函数数据和设备

默认情况下 c使用标准I/O包查找标准输入作为输入源，

```shell
./echo1 <text.txt
```

生成可编译文件echo1之后 把text.txt作为输入源

```shell
./echo1 <text.txt>out.txt
```

把out.txt作为输出

## 8.5设计更友好的用户界面

1. 考虑到用户的错误输入，应处理用户的错误输入
2. 充分测试不同输入情况

### 8.5.2混合数值和字符输入

getchar处理字符scanf()处理数值输入，两个函数不能混用，因为getchar()读取每个字符，包括空格制表符和换行符，而scanf()在读取数字时则会跳过空白符

```c
        while(getchar()!='\n')
        {
            continue;
        }
```

这个循环可以丢弃掉所有换行符及换行符以前的字符

达到清除缓存区中换行符的作用

## 8.6输入验证

保证程序的健壮性



